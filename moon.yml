$schema: https://moonrepo.dev/schemas/project.json

tasks:
  build:
    command: tsdown
    toolchain: node
    inputs:
      - src/**/*
      - tsdown.config.ts
    outputs:
      - dist/**/*
  test:
    command: vitest
    toolchain: node
    inputs:
      - src/**/*
      - vitest.config.ts
  lint:
    command: oxlint
    args:
      - --fix
    toolchain: node
  format-oxfmt:
    command: oxfmt
    args:
      - --write
      - --ignore-path=.gitignore
      - .
    toolchain: node
  format-prettier:
    command: prettier
    args:
      - --write
      - --no-error-on-unmatched-pattern
      - "'**/*.{md,mdx,astro,yaml,yml}'"
    toolchain: node
  format:
    deps:
      - format-oxfmt
      - format-prettier
